@model Trakt.Models.SerieViewModel

@{
   ViewBag.Title = "Series";
}

<h2>@ViewBag.Title</h2>
@using (Html.BeginForm("Index", "Series", FormMethod.Post, new { id = "sorterenForm" }))
{
   <div class="row">
      <div class="col-md-3 col-sm-3">
         @Html.LabelFor(model => model.Sorteren, "Sorteren Op")
         @Html.EnumDropDownListFor(model => model.Sorteren, null, new { /*@onchange = "javascript:document.getElementById('sorterenForm').submit()",*/ @class = "form-control" })
      </div>
      <div class="col-md-3 col-sm-3">
         @Html.LabelFor(model => model.FilterOp, "Filter Op")
         @Html.EnumDropDownListFor(model => model.FilterOp, null, new { /*@onchange = "javascript:document.getElementById('sorterenForm').submit()",*/ @class = "form-control" })
      </div>
      <div class="col-md-3 col-sm-3">
         @Html.LabelFor(model => model.Filter)
         @Html.TextBoxFor(model => model.Filter, new { /*@onblur = "javascript:document.getElementById('sorterenForm').submit()",*/ @placeholder = "Filter", @class = "form-control" })
      </div>
      <div class="col-md-2 col-sm-3" style="float:right">
         @Html.LabelFor(model => model.MaxFilms, "Resultaten")
         @Html.EnumDropDownListFor(model => model.MaxFilms, null, new { @class = "form-control" })
      </div>
   </div>
   <div class="row">
      <div class="col-md-12">
         <button type="submit" class="btn btn-success btnzoeken" style="width:100%">Zoeken</button>
      </div>
   </div>
}

<div class="row">
   @foreach (var serie in Model.Series)
   {
      <div class="col-lg-3 col-md-4 col-md-offset-0 col-sm-5 col-sm-offset-1 poster">
         <a href="@Url.Action("Details", "Series", new { id = serie.ID })" title="@serie.Naam">
            @{
               var source = "";
               if (serie.PosterPath == null)
               {
                  source = "/Content/Images/no_image.png";
               }
               else
               {
                  source = serie.PosterPath;
               }
            }
            <img src="@source" class="image" alt="@serie.Naam" onerror="this.src='/Content/Images/no_image.png'" style="max-width:100%; height:400px" />
            <div class="overlayPoster">
               <div class="posterOverlayContent">
                  @serie.Naam

                  @if (Model.Sorteren != BL.Domain.SerieSortEnum.Naam)
                  {
                     <br />
                     switch (Model.Sorteren)
                     {
                        case BL.Domain.SerieSortEnum.Aantal_Afleveringen:
                        case BL.Domain.SerieSortEnum.Aantal_Afleveringen_Desc:
                           <text>@serie.Afleveringen.Count Afleveringen</text>
                           break;
                     }
                  }
               </div>
            </div>
         </a>
      </div>
   }
</div>
